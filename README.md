[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.7051952.svg)](https://doi.org/10.5281/zenodo.7051952)
[![License (for code):
MIT](https://img.shields.io/badge/License%20(for%20code)-MIT-green.svg)](https://opensource.org/licenses/MIT)
[![License:
CC0-1.0](https://img.shields.io/badge/License%20(for%20data)-CC0_1.0-lightgrey.svg)](http://creativecommons.org/publicdomain/zero/1.0/)
[![License:
CC-BY-4.0](https://img.shields.io/badge/License%20(for%20text)-CC_BY_4.0-blue.svg)](https://creativecommons.org/licenses/by/4.0/)

# Global patterns and correlates in the emergence of antimicrobial resistance in humans
Preprint available on MedRxiv: https://www.medrxiv.org/content/10.1101/2022.09.29.22280519v2

This repository is on Zenodo: https://doi.org/10.5281/zenodo.7051952

If referring to the study or methods, please cite the publication. If you re-use these data and/or code in a publication please be sure to cite the Zenodo reference, as well.

___Authors___:  _Emma Mendelsohn[![](https://orcid.org/sites/default/files/images/orcid_16x16.png)](https://orcid.org/0000-0003-3446-9993), Noam Ross [![](https://orcid.org/sites/default/files/images/orcid_16x16.png)](https://orcid.org/0000-0002-2136-0000), Carlos Zambrana-Torrelio[![](https://orcid.org/sites/default/files/images/orcid_16x16.png)](https://orcid.org/0000-0002-5614-7496), Thomas Van Boeckel, Ramanan Laxminarayan[![](https://orcid.org/sites/default/files/images/orcid_16x16.png)](https://orcid.org/0000-0002-1390-9016), Peter Daszak[![](https://orcid.org/sites/default/files/images/orcid_16x16.png)](https://orcid.org/0000-0002-2046-5695)_

---

### Repository Structure

This repository contains code, data, and documentation used to model correlates of global antimicrobial
resistance emergence events. 

## Reproducibility
This project was run with R version 4.2.1 (2022-06-23). This project uses the {renv} framework to record R package dependencies and versions. Packages and versions used are recorded in renv.lock and code used to manage dependencies is in renv/ and other files in the root project directory. On starting an R session in the working directory, run renv::restore() to install R package dependencies.

## Code
-	`00-init-data.R` compiles global data for the analysis. Outputs from this script are saved in `data/`, so it is not necessary to run this script to run the analysis in `_drake.R`.
    - AMR emergence data is from [DOI 10.5281/zenodo.3964895](https://zenodo.org/record/3964895)
    - Data on potential correlates of AMR emergence come from multiple sources, documented within comments.
- `00-get-promed-data.R` generates an index of ProMED publications by country (to be used as an indicator for reporting bias within the study). Outputs from this script are saved in `data/`, so it is not necessary to run this script to run the analysis `_drake.R`.
- `_drake.R` uses the [drake](https://github.com/ropensci/drake) package to run the analysis from the data compiled in above scripts. It uses [static branching](https://books.ropensci.org/drake/static.html) to evaluate multiple scenarios to test model robustness. Running the full script will trigger the drake plan to run (alternatively, sourcing `Makefile` within this repo will trigger a run). Individual targets within the plan can be loaded into environment using `drake::loadd(target_name)`
- `R/` contains functions used in the drake pipeline

## Data
-	`data/` contains all pre-processed data. All processed data is saved as `country-level-amr.csv`, which is used as the input to `_drake.R`.

## Outputs
-	`plots/` contains all figures generated by the analysis
-	`doc/` contains `.Rmd` files with miscellaneous data queries
